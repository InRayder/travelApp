# 更新日誌 (Changelog)

## [0.1.3] - 2025-12-03

### 主要功能 (Major Features)
- **準備清單頁面 (Checklist)**: 新增旅程準備清單功能,內建「行前準備」與「退房前準備」兩大分類,使用者可自行新增類別與項目。
- **AI 智能匯入攻略 (AI Import Guide)**: 新增從社群媒體 (Instagram/Facebook) 貼文連結或內容自動生成旅遊攻略卡片的功能,AI 會自動分析景點資訊、必看重點與參觀撇步。
- **PWA 分享目標 (Share Target)**: 應用程式現在支援作為分享目標,使用者可直接從其他 App 分享內容至 Easy Trip,並自動開啟 AI 智能匯入功能。

### 其他新增 (Other Additions)
- **新增 InputModal 元件**: 通用的輸入對話框元件,用於快速輸入文字 (如新增清單分類名稱)。
- **新增 aiService**: 抽離 AI 生成攻略的邏輯至獨立的 service 檔案,提升程式碼可維護性。
- **路由守衛 (Route Guard)**: 新增路由守衛功能,自動偵測分享目標參數並導向攻略頁面。
- **PWA 安裝提示優化**: 改善安裝提示邏輯,將 `beforeinstallprompt` 事件儲存至 Pinia store,並整合至新手導覽 (Onboarding) 中。
- **AI 模型升級**: 預設 AI 模型從 `gemini-1.5-flash` 升級至 `gemini-2.5-flash`,提供更快速與精準的回應。

### 介面優化 (UI Improvements)
- **底部導覽列**: 新增「準備清單」導覽按鈕,並調整原有按鈕配置。
- **新手導覽 (Onboarding)**: 新增第五個投影片,專門引導使用者安裝 PWA 應用程式。
- **安裝提示**: 只在新手導覽關閉後才顯示安裝提示,避免重複干擾。
- **記帳頁面 FAB 調整**: 將新增費用按鈕位置下移,避免與底部導覽列重疊。

### 修正項目 (Fixed)
- **事件監聽器管理**: 在 `App.vue` 中正確新增與移除 `beforeinstallprompt` 事件監聽器,避免記憶體洩漏。
- **InstallPrompt 元件重構**: 將安裝提示事件管理移至 Pinia store,簡化元件邏輯。

## [0.1.2] - 2025-12-02

### 主要功能 (Major Features)
- **AI 智慧助手 (AI Assistant)**: 全新 AI 助手登場！不僅支援極速翻譯與情境模擬對話，更能協助生成旅遊攻略、推薦交通方式，甚至與您討論行程安排，是您日本之旅的全能夥伴。
- **實用日語對話 (Practical Japanese Conversation)**: 整合了自訂對話編輯、語音朗讀 (TTS) 及極速翻譯功能，打造更實用的溝通工具。

### 其他新增 (Other Additions)
- **極速翻譯 (Fast Translation)**: 翻譯功能自動切換至 `Gemini 2.5 Flash-Lite` 模型，回應更迅速。
- **Google 翻譯備援 (Google Translate Fallback)**: 若未設定 API Key，自動開啟 Google 翻譯網頁作為備援。
- **介面優化 (UI Improvements)**: 根據 API Key 設定狀態自動調整介面顯示。

### 修正項目 (Fixed)
- **Pinia 持久化 (Pinia Persistence)**: 修正了 `conversations` store 中因缺少 `pinia-plugin-persistedstate` 導致的 TypeScript 錯誤，確保資料能正確儲存。

## [0.1.1] - 2025-12-01

### 新增功能 (Added)
- **設定頁面優化 (Settings)**: 重構設定視窗為分頁式設計 (行程、偏好、票券、系統)，提升操作體驗。
- **語音選擇 (Voice Selection)**: 在日語對話功能中新增語音選擇與試聽功能，支援瀏覽器提供的多種日語語音。
- **效能監控 (Speed Insights)**: 整合 Vercel Speed Insights 以監控應用程式效能。

## [0.1.0] - 2025-11-30

### 新增功能 (Added)
- **標題列自動收合**: 實作了動態標題列，當向下捲動時會自動縮小以最大化瀏覽空間。此功能已套用於行程、攻略及記帳頁面。
- **地圖檢視整合**: 將地圖頁籤整合至行程頁籤中。使用者現在可以在行程頁面內直接切換「列表」與「地圖」模式。
- **票券顯示功能**: 在交通詳情視窗中新增了「查看票券」按鈕（票券圖示），方便快速查看關聯的交通票券。
- **亮度自動增強**: 查看票券圖片時新增了自動亮度增強功能，確保圖片清晰可讀。
- **匯率設定**: 在設定頁面新增「匯率設定」功能，允許使用者手動調整新台幣 (TWD) 對日圓 (JPY) 的匯率，並即時反映於費用計算。
- **AI 助手互動模式**: 更新 AI 指令，新增「逐日確認」與「概略確認」兩種互動模式，讓使用者能選擇行程確認的詳細程度。
- **PWA 安裝提示**: 新增自動偵測並詢問使用者是否安裝應用程式的功能。
  - **Android / Desktop**: 自動顯示安裝提示。
  - **iOS**: 顯示專屬教學視窗，引導使用者透過「加入主畫面」進行安裝。

### 變更項目 (Changed)
- **底部導覽列**: 改善了底部導覽列未選取圖示的對比度（從 `text-gray-300` 改為 `text-gray-400`），提升可視性。
- **介面優化**: 將「查看票券」功能從編輯事件視窗移動至交通詳情視窗，以符合使用情境。
- **幣別管理**: 將幣別資料從 getter 移至 state 管理，並簡化系統僅保留 TWD 與 JPY 兩種幣別。
- **AI 指令優化**:
  - 明確定義 `Transport` 介面中的 `flight` 類型及相關欄位。
  - 明確列出所有可用的 Tailwind CSS 顏色與色階，防止生成錯誤的顏色代碼。
  - 補充說明 `company` 欄位包含航空公司資訊。

### 移除項目 (Removed)
- **天氣資訊**: 移除了行程頁面日期選擇器中的靜態天氣圖示與溫度顯示，因目前無法同步即時天氣資訊。
- **地圖頁籤**: 移除了底部導覽列中獨立的地圖頁籤，改用整合式的切換開關。

### 修正項目 (Fixed)
- **型別安全**: 解決了與 `SortableJS`、`Leaflet` 及 `Event` 型別相關的 TypeScript 錯誤。
- **匯率顯示**: 修正設定頁面中匯率輸入框因 Vue 渲染優先順序導致無法顯示的問題。
